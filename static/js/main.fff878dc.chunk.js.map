{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","components/scooters-list-item/index.js","components/scooters-list-item/scooters-list-item.js","components/spinner/index.js","components/spinner/spinner.js","components/apistore-service-context/apistore-service-context.js","components/hoc/with-apistore-service.js","actions/index.js","utils/compose.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/scooter-list/scooter-list.js","components/scooter-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/apistore-service.js","reducers/scooter-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","connect","_ref2","_ref2$shoppingCart","shoppingCart","items","cartItems","total","orderTotal","_ref","newCount","numItems","reduce","acc","curentvalue","count","newTotal","accumulator","currentValue","react_default","a","createElement","className","Link","to","href","ScooterListItem","scooter","onAddedToCart","title","specifications","wheeldiameter","weight","price","coverImage","src","alt","onClick","Spinner","React","createContext","DatastoreServiceProvider","Provider","DatastoreServiceConsumer","Consumer","withStoreService","Wrapped","props","datastoreService","Object","assign","scooterAddedToCart","scooterId","type","payload","fetchApidata","dispatch","getData","then","data","dataLoaded","catch","err","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","ErrorIndicator","ScooterList","scooters","map","key","id","components_scooters_list_item","ScooterListContainer","this","_this$props","loading","error","components_error_indicator","components_spinner","scooter_list_ScooterList","Component","_ref2$scooterList","scooterList","_ref3","mapDispatchToProps","onIncrease","onDecrease","onDelete","item","idx","HomePage","components_scooter_list","shopping_cart_table_shopping_cart_table","CartPage","App","role","components_shop_header","Switch","Route","path","component","exact","ErrorBoundry","state","hasError","setState","children","ApistoreService","_this","Promise","resolve","setTimeout","updateScooterList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","reducer","store","createStore","DatastoreService","ReactDOM","render","es","error_boundry","value","BrowserRouter","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.fff878dc.chunk.js","sourcesContent":["import ShopHeader from \"./shop-header\";\r\n\r\nexport default ShopHeader;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./shop-header.css\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst ShopHeader = ({ items, numItems, total }) => {\r\n  const newCount = items.reduce((acc, curentvalue) => {\r\n    return acc + curentvalue.count;\r\n  }, 0);\r\n  const newTotal = items.reduce((accumulator, currentValue) => {\r\n    return accumulator + currentValue.total;\r\n  }, 0);\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\">\r\n        <div className=\"logo text-dark\" href=\"#\">\r\n          RollerStore\r\n        </div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"shopping-cart\">\r\n          <i className=\"cart-icon fa fa-shopping-cart\" />\r\n          {newCount} шт. (₽ {newTotal})\r\n        </div>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import ScooterListItem from \"./scooters-list-item\";\r\n\r\nexport default ScooterListItem;\r\n","import React from \"react\";\r\nimport \"./scooters-list-item.css\";\r\n\r\nconst ScooterListItem = ({ scooter, onAddedToCart }) => {\r\n  const {\r\n    title,\r\n    specifications,\r\n    wheeldiameter,\r\n    weight,\r\n    price,\r\n    coverImage\r\n  } = scooter;\r\n  return (\r\n    <div className=\"scooter-list-item\">\r\n      <div className=\"scooter-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"scooter-details\">\r\n        <span href=\"#\" className=\"scooter-title\">\r\n          {title}\r\n        </span>\r\n        <div className=\"scooter-author\">{specifications}</div>\r\n        <div className=\"scooter-author\">{wheeldiameter}</div>\r\n        <div className=\"scooter-author\">{weight}</div>\r\n        <div className=\"scooter-price\">{price} руб.</div>\r\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">\r\n          Добавить в корзину\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScooterListItem;\r\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import React from \"react\";\n\nconst {\n  Provider: DatastoreServiceProvider,\n  Consumer: DatastoreServiceConsumer\n} = React.createContext();\n\nexport { DatastoreServiceProvider, DatastoreServiceConsumer };\n","import React from \"react\";\r\nimport { DatastoreServiceConsumer } from \"../apistore-service-context\";\r\n\r\nconst withStoreService = () => Wrapped => {\r\n  return props => {\r\n    return (\r\n      <DatastoreServiceConsumer>\r\n        {datastoreService => {\r\n          return <Wrapped {...props} datastoreService={datastoreService} />;\r\n        }}\r\n      </DatastoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withStoreService;\r\n","const dataRequested = () => {\r\n  return {\r\n    type: \"FETCH_DATA_REQUESTED\"\r\n  };\r\n};\r\n\r\nconst dataError = error => {\r\n  return {\r\n    type: \"FETCH_DATA_ERROR\",\r\n    payload: error\r\n  };\r\n};\r\n\r\nconst dataLoaded = data => {\r\n  return {\r\n    type: \"FETCH_DATA_LOADED\",\r\n    payload: data\r\n  };\r\n};\r\n\r\nexport const scooterAddedToCart = scooterId => {\r\n  return {\r\n    type: \"SCOOTER_ADDED_TO_CART\",\r\n    payload: scooterId\r\n  };\r\n};\r\n\r\nexport const scooterRemovedFromCart = scooterId => {\r\n  return {\r\n    type: \"SCOOTER_REMOVED_FROM_CART\",\r\n    payload: scooterId\r\n  };\r\n};\r\n\r\nexport const allScootersRemovedFromCart = scooterId => {\r\n  return {\r\n    type: \"ALL_SCOOTERS_REMOVED_FROM_CART\",\r\n    payload: scooterId\r\n  };\r\n};\r\n\r\nconst fetchApidata = (datastoreService, dispatch) => () => {\r\n  dispatch(dataRequested());\r\n  datastoreService\r\n    .getData()\r\n    .then(data => dispatch(dataLoaded(data)))\r\n    .catch(err => dispatch(dataError(err)));\r\n};\r\n//fetchApidata ф-ия, которая возвращает функцию\r\n//const fetchApidata = (dispatch, datastoreService) =>()\r\n//внешняя ф-ия для работы в mapDispatchToProps\r\n// внутр-яя ф-ия для компонента\r\nexport { fetchApidata };\r\n","const compose = (...funcs) => comp => {\r\n  return funcs.reduceRight((wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;\r\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import React, { Component } from \"react\";\r\nimport ScooterListItem from \"../scooters-list-item\";\r\nimport Spinner from \"../spinner\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { withStoreService } from \"../hoc\";\r\nimport { fetchApidata, scooterAddedToCart } from \"../../actions\";\r\nimport { compose } from \"../../utils\";\r\n\r\nimport \"./scooter-list.css\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nconst ScooterList = ({ scooters, onAddedToCart }) => {\r\n  return (\r\n    <ul className=\"scooter-list row\">\r\n      {scooters.map(scooter => {\r\n        return (\r\n          <li key={scooter.id} className=\"col-sm-12 col-md-6 col-lg-6\">\r\n            <ScooterListItem\r\n              scooter={scooter}\r\n              onAddedToCart={() => onAddedToCart(scooter.id)}\r\n            />\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\nclass ScooterListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchApidata();\r\n  }\r\n\r\n  render() {\r\n    const { scooters, loading, error, onAddedToCart } = this.props;\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n    return <ScooterList scooters={scooters} onAddedToCart={onAddedToCart} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ scooterList: { scooters, loading, error } }) => {\r\n  return { scooters, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { datastoreService }) => {\r\n  return {\r\n    fetchApidata: fetchApidata(datastoreService, dispatch),\r\n    onAddedToCart: id => dispatch(scooterAddedToCart(id))\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  withStoreService(),\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )\r\n)(ScooterListContainer);\r\n","import ScooterList from \"./scooter-list\";\r\n\r\nexport default ScooterList;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  scooterAddedToCart,\r\n  scooterRemovedFromCart,\r\n  allScootersRemovedFromCart\r\n} from \"../../actions\";\r\nimport \"./shopping-cart-table.css\";\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete\r\n}) => {\r\n  const newTotal = items.reduce((accumulator, currentValue) => {\r\n    return accumulator + currentValue.total;\r\n  }, 0);\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>{total}руб.</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2 className=\"cart-table-headline\">Ваш заказ</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Товар</th>\r\n            <th>Количество</th>\r\n            <th>Цена</th>\r\n            <th>Акция</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>{items.map(renderRow)}</tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">Всего: {newTotal} ₽</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: scooterAddedToCart,\r\n  onDecrease: scooterRemovedFromCart,\r\n  onDelete: allScootersRemovedFromCart\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ShoppingCartTable);\r\n","import React from \"react\";\r\nimport ScooterList from \"../scooter-list\";\r\nimport ShoppingCartTable from \"../shopping-cart-table/shopping-cart-table\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <ScooterList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nconst CartPage = () => {\r\n  return <div>Cart Page</div>;\r\n};\r\n\r\nexport default CartPage;\r\n","import App from './app';\n\nexport default App;\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport ShopHeader from \"../shop-header\";\r\nimport { HomePage, CartPage } from \"../pages\";\r\n\r\nimport \"./app.css\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader numItems={1} total={10000} />\r\n      <Switch>\r\n        <Route path=\"/\" component={HomePage} exact />\r\n\r\n        <Route path=\"/cart\" component={CartPage} />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}","export default class ApistoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: \"Самокат HELLO WOOD XL-1\",\r\n      specifications: \"материал колес: полиуретан\",\r\n      wheeldiameter: \"диаметр колес 230 мм\",\r\n      weight: \"4.8 кг\",\r\n      price: 3910,\r\n      coverImage:\r\n        \"https://avatars.mds.yandex.net/get-mpic/195452/img_id4391503519493651975/9hq\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Самокат SHULZ 200 Pro\",\r\n      specifications: \"материал колес: полиуретан\",\r\n      wheeldiameter: \"диаметр колес 200 мм\",\r\n      weight: \"6.1 кг\",\r\n      price: 7820,\r\n      coverImage:\r\n        \"https://avatars.mds.yandex.net/get-mpic/364668/img_id7139315448179193599.jpeg/9hq\"\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"Электросамокат KUGOO S3\",\r\n      specifications: \"материал колес: резина\",\r\n      wheeldiameter: \"диаметр колес 200 мм\",\r\n      weight: \"12 кг\",\r\n      price: 11500,\r\n      coverImage:\r\n        \"https://avatars.mds.yandex.net/get-mpic/1362400/img_id2265701916596758660.jpeg/9hq\"\r\n    },\r\n    {\r\n      id: 4,\r\n      title: \"Электросамокат KUGOO Light\",\r\n      specifications: \"материал колес: полиуретан\",\r\n      wheeldiameter: \"диаметр колес 200 мм\",\r\n      weight: \"11 кг\",\r\n      price: 13000,\r\n      coverImage:\r\n        \"https://avatars.mds.yandex.net/get-mpic/1525355/img_id7012046833082785579.jpeg/9hq\"\r\n    }\r\n  ];\r\n\r\n  getData() {\r\n    return new Promise(resolve => {\r\n      setTimeout(() => {\r\n        resolve(this.data);\r\n      }, 700);\r\n    });\r\n  }\r\n}\r\n","const updateScooterList = (state, action) => {\r\n  if (state === undefined) {\r\n    return { scooters: [], loading: true, error: null };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"FETCH_DATA_REQUESTED\":\r\n      return {\r\n        scooters: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case \"FETCH_DATA_ERROR\":\r\n      return {\r\n        scooters: [],\r\n        loading: true,\r\n        error: action.payload\r\n      };\r\n\r\n    case \"FETCH_DATA_LOADED\":\r\n      return {\r\n        scooters: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    default:\r\n      return state.scooterList;\r\n  }\r\n};\r\n\r\nexport default updateScooterList;\r\n","const updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (scooter, item = {}, quantity) => {\r\n  const { id = scooter.id, count = 0, title = scooter.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * scooter.price\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, scooterId, quantity) => {\r\n  const {\r\n    scooterList: { scooters },\r\n    shoppingCart: { cartItems }\r\n  } = state;\r\n\r\n  const scooter = scooters.find(({ id }) => id === scooterId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === scooterId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(scooter, item, quantity);\r\n\r\n  return { cartItems: updateCartItems(cartItems, newItem, itemIndex) };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: []\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"SCOOTER_ADDED_TO_CART\":\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case \"SCOOTER_REMOVED_FROM_CART\":\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case \"ALL_SCOOTERS_REMOVED_FROM_CART\":\r\n      const item = state.shoppingCart.cartItems.find(\r\n        ({ id }) => id === action.payload\r\n      );\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateScooterList from \"./scooter-list\";\r\nimport updateShoppingCart from \"./shopping-cart\";\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    scooterList: updateScooterList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore } from \"redux\";\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nimport App from \"./components/app\";\r\nimport ErrorBoundry from \"./components/error-boundry\";\r\nimport DatastoreService from \"./services/apistore-service\";\r\nimport { DatastoreServiceProvider } from \"./components/apistore-service-context\";\r\n\r\nimport store from \"./store\";\r\n\r\nconst datastoreService = new DatastoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <DatastoreServiceProvider value={datastoreService}>\r\n        <Router>\r\n          <App />\r\n        </Router>\r\n      </DatastoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}